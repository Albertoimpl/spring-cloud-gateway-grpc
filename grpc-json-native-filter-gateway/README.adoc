=  JSONToGRPCFilter GatewayFilter Factory

The JSONToGRPCFilter GatewayFilter Factory converts a JSON payload to a gRPC request.

The filter takes the following arguments:

* `protoDescriptor` Relative path to the proto descriptor file.

This file can be generated using `protoc` specifying the `--descriptor_set_out` flag:

[source,bash]
----
protoc --proto_path=src/main/resources/proto/ \
--descriptor_set_out=src/main/resources/proto/hello.pb  \
src/main/resources/proto/hello.proto
----

* `protoFile` Relative path to the proto definition file.

* `service` Fully qualified name of the service that will handle the request.

* `method` Method name in the service that will handle the request.

NOTE: `streaming` is not supported.


*application.yml.*

[source,yaml]
----
spring:
  cloud:
    gateway:
      routes:
        - id: json-grpc
          uri: https://localhost:6565/testhello
          predicates:
            - Path=/json/**
          filters:
            - name: JSONToGRPCFilter
              args:
                protoDescriptor: grpc-json-native-filter-gateway/src/main/resources/proto/hello.pb
                protoFile: grpc-json-native-filter-gateway/src/main/resources/proto/hello.proto
                service: com.example.grpcserver.hello.HelloService
                method: hello
----

When a request is made through the gateway to `/json/hello` the request will be transformed using the definition provided in `hello.proto`, sent to `com.example.grpcserver.hello.HelloService/hello`, and transform the response back to JSON.

By default, it will create a `NettyChannel` using the default `TrustManagerFactory`. However, this channel can be customized by creating a bean of type `GRPCSSLContext`:

[source,java]
----

@Configuration
public class GRPCLocalConfiguration {
    @Bean
    public GRPCSSLContext sslContext() {
        return new GRPCSSLContext(
                GrpcSslContexts.forClient()
                        .trustManager(trustAllCerts())
                        .build());
    }
}
----
